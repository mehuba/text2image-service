{
  "prompt": {
    "1": {
      "inputs": {
        "ckpt_name": "juggernautXL_v8Rundiffusion.safetensors"
      },
      "class_type": "CheckpointLoaderSimple",
      "_meta": {
        "title": "Load Checkpoint"
      }
    },
    "2": {
      "inputs": {
        "infer_mode": "story",
        "photomake_ckpt": "none",
        "ipadapter_ckpt": "none",
        "quantize_mode": "fp8",
        "lora_scale": 0.8,
        "extra_function": "",
        "model": [
          "1",
          0
        ],
        "vae": [
          "1",
          2
        ]
      },
      "class_type": "StoryDiffusion_Apply",
      "_meta": {
        "title": "StoryDiffusion_Apply"
      }
    },
    "3": {
      "inputs": {
        "width": 768,
        "height": 768,
        "role_text": "${role_text}",
        "scene_text": "${scene_text}",
        "pos_text": "${pos_text}",
        "neg_text": "${neg_text}",
        "lora_trigger_words": "best quality",
        "add_style": "No_style",
        "mask_threshold": 0.5,
        "extra_param": "",
        "guidance_list": "0., 0.25, 0.4, 0.75;0.6, 0.25, 1., 0.75",
        "clip": [
          "1",
          1
        ],
        "switch": [
          "2",
          1
        ]
      },
      "class_type": "StoryDiffusion_CLIPTextEncode",
      "_meta": {
        "title": "StoryDiffusion_CLIPTextEncode"
      }
    },
    "4": {
      "inputs": {
        "samples": [
          "6",
          0
        ],
        "vae": [
          "1",
          2
        ]
      },
      "class_type": "VAEDecode",
      "_meta": {
        "title": "VAE Decode"
      }
    },
    "5": {
      "inputs": {
        "filename_prefix": "ComfyUI",
        "images": [
          "4",
          0
        ]
      },
      "class_type": "SaveImage",
      "_meta": {
        "title": "Save Image"
      }
    },
    "6": {
      "inputs": {
        "seed": 1258993914,
        "steps": 20,
        "cfg": 8,
        "sampler_name": "euler",
        "scheduler": "normal",
        "sa32_degree": 0.5,
        "sa64_degree": 0.5,
        "denoise": 1,
        "model": [
          "2",
          0
        ],
        "positive": [
          "3",
          0
        ],
        "negative": [
          "3",
          1
        ],
        "info": [
          "3",
          2
        ],
        "latent_image": [
          "7",
          0
        ]
      },
      "class_type": "StoryDiffusion_KSampler",
      "_meta": {
        "title": "StoryDiffusion_KSampler"
      }
    },
    "7": {
      "inputs": {
        "width": [
          "3",
          3
        ],
        "height": [
          "3",
          4
        ],
        "batch_size": 1
      },
      "class_type": "EmptyLatentImage",
      "_meta": {
        "title": "Empty Latent Image"
      }
    }
  },
  "extra_data": {
    "extra_pnginfo": {
      "workflow": {
        "last_node_id": 7,
        "last_link_id": 14,
        "nodes": [
          {
            "id": 6,
            "type": "StoryDiffusion_KSampler",
            "pos": [
              983.5430297851562,
              375.1236572265625
            ],
            "size": [
              315,
              330
            ],
            "flags": {},
            "order": 4,
            "mode": 0,
            "inputs": [
              {
                "name": "model",
                "type": "MODEL",
                "link": 14
              },
              {
                "name": "positive",
                "type": "CONDITIONING",
                "link": 7
              },
              {
                "name": "negative",
                "type": "CONDITIONING",
                "link": 8
              },
              {
                "name": "info",
                "type": "DIFFINFO",
                "link": 9
              },
              {
                "name": "latent_image",
                "type": "LATENT",
                "link": 12
              }
            ],
            "outputs": [
              {
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  13
                ]
              }
            ],
            "properties": {
              "cnr_id": "comfyui_storydiffusion",
              "ver": "c750ae7bdbb571132859048077083a67967cc3a6",
              "Node name for S&R": "StoryDiffusion_KSampler"
            },
            "widgets_values": [
              1258993914,
              "randomize",
              20,
              8,
              "euler",
              "normal",
              0.5,
              0.5,
              1
            ]
          },
          {
            "id": 5,
            "type": "SaveImage",
            "pos": [
              1374.0037841796875,
              282.14190673828125
            ],
            "size": [
              315,
              270
            ],
            "flags": {},
            "order": 6,
            "mode": 0,
            "inputs": [
              {
                "name": "images",
                "type": "IMAGE",
                "link": 6
              }
            ],
            "outputs": [],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "v0.3.10"
            },
            "widgets_values": [
              "ComfyUI"
            ]
          },
          {
            "id": 1,
            "type": "CheckpointLoaderSimple",
            "pos": [
              104.16119384765625,
              367.2445373535156
            ],
            "size": [
              315,
              98
            ],
            "flags": {},
            "order": 0,
            "mode": 0,
            "inputs": [],
            "outputs": [
              {
                "name": "MODEL",
                "type": "MODEL",
                "links": [
                  1
                ],
                "slot_index": 0
              },
              {
                "name": "CLIP",
                "type": "CLIP",
                "links": [
                  3
                ],
                "slot_index": 1
              },
              {
                "name": "VAE",
                "type": "VAE",
                "links": [
                  2,
                  5
                ],
                "slot_index": 2
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "v0.3.10",
              "Node name for S&R": "CheckpointLoaderSimple"
            },
            "widgets_values": [
              "juggernautXL_v8Rundiffusion.safetensors"
            ]
          },
          {
            "id": 3,
            "type": "StoryDiffusion_CLIPTextEncode",
            "pos": [
              496.86322021484375,
              517.5008544921875
            ],
            "size": [
              400,
              500
            ],
            "flags": {},
            "order": 2,
            "mode": 0,
            "inputs": [
              {
                "name": "clip",
                "type": "CLIP",
                "link": 3
              },
              {
                "name": "switch",
                "type": "DIFFCONDI",
                "link": 4
              },
              {
                "name": "add_function",
                "type": "STORY_CONDITIONING",
                "link": null,
                "shape": 7
              },
              {
                "name": "image",
                "type": "IMAGE",
                "link": null,
                "shape": 7
              },
              {
                "name": "control_image",
                "type": "IMAGE",
                "link": null,
                "shape": 7
              }
            ],
            "outputs": [
              {
                "name": "positive",
                "type": "CONDITIONING",
                "links": [
                  7
                ],
                "slot_index": 0
              },
              {
                "name": "negative",
                "type": "CONDITIONING",
                "links": [
                  8
                ],
                "slot_index": 1
              },
              {
                "name": "info",
                "type": "DIFFINFO",
                "links": [
                  9
                ],
                "slot_index": 2
              },
              {
                "name": "width",
                "type": "INT",
                "links": [
                  10
                ],
                "slot_index": 3
              },
              {
                "name": "height",
                "type": "INT",
                "links": [
                  11
                ],
                "slot_index": 4
              }
            ],
            "properties": {
              "cnr_id": "comfyui_storydiffusion",
              "ver": "c750ae7bdbb571132859048077083a67967cc3a6",
              "Node name for S&R": "StoryDiffusion_CLIPTextEncode"
            },
            "widgets_values": [
              768,
              768,
              "[Taylor] a woman img, wearing a white T-shirt, blue loose hair.\n[Lecun] a man img,wearing a suit,black hair.",
              "[Taylor] wake up in the bed ;\n[Taylor] have breakfast by the window;\n[Lecun] driving a car;\n[Lecun] is working.",
              ",best",
              "bad anatomy, bad hands, missing fingers, extra fingers,three hands, three legs, bad arms, missing legs, missing arms, poorly drawn face, bad face, fused face, cloned face, three crus, fused feet, fused thigh, extra crus, ugly fingers, horn,amputation, disconnected limbs",
              "best quality",
              "No_style",
              0.5,
              "",
              "0., 0.25, 0.4, 0.75;0.6, 0.25, 1., 0.75"
            ]
          },
          {
            "id": 7,
            "type": "EmptyLatentImage",
            "pos": [
              975.1171264648438,
              787.0071411132812
            ],
            "size": [
              315,
              106
            ],
            "flags": {},
            "order": 3,
            "mode": 0,
            "inputs": [
              {
                "name": "width",
                "type": "INT",
                "link": 10,
                "widget": {
                  "name": "width"
                }
              },
              {
                "name": "height",
                "type": "INT",
                "link": 11,
                "widget": {
                  "name": "height"
                }
              }
            ],
            "outputs": [
              {
                "name": "LATENT",
                "type": "LATENT",
                "links": [
                  12
                ],
                "slot_index": 0
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "v0.3.10",
              "Node name for S&R": "EmptyLatentImage"
            },
            "widgets_values": [
              512,
              512,
              1
            ]
          },
          {
            "id": 4,
            "type": "VAEDecode",
            "pos": [
              981.680908203125,
              205.42869567871094
            ],
            "size": [
              210,
              46
            ],
            "flags": {},
            "order": 5,
            "mode": 0,
            "inputs": [
              {
                "name": "samples",
                "type": "LATENT",
                "link": 13
              },
              {
                "name": "vae",
                "type": "VAE",
                "link": 5
              }
            ],
            "outputs": [
              {
                "name": "IMAGE",
                "type": "IMAGE",
                "links": [
                  6
                ],
                "slot_index": 0
              }
            ],
            "properties": {
              "cnr_id": "comfy-core",
              "ver": "v0.3.10",
              "Node name for S&R": "VAEDecode"
            }
          },
          {
            "id": 2,
            "type": "StoryDiffusion_Apply",
            "pos": [
              550.2994384765625,
              212.71946716308594
            ],
            "size": [
              315,
              218
            ],
            "flags": {},
            "order": 1,
            "mode": 0,
            "inputs": [
              {
                "name": "model",
                "type": "MODEL",
                "link": 1
              },
              {
                "name": "vae",
                "type": "VAE",
                "link": 2
              },
              {
                "name": "CLIP_VISION",
                "type": "CLIP_VISION",
                "link": null,
                "shape": 7
              }
            ],
            "outputs": [
              {
                "name": "model",
                "type": "MODEL",
                "links": [
                  14
                ],
                "slot_index": 0
              },
              {
                "name": "switch",
                "type": "DIFFCONDI",
                "links": [
                  4
                ],
                "slot_index": 1
              }
            ],
            "properties": {
              "cnr_id": "comfyui_storydiffusion",
              "ver": "c750ae7bdbb571132859048077083a67967cc3a6",
              "Node name for S&R": "StoryDiffusion_Apply"
            },
            "widgets_values": [
              "story",
              "none",
              "none",
              "fp8",
              0.8,
              ""
            ]
          }
        ],
        "links": [
          [
            1,
            1,
            0,
            2,
            0,
            "MODEL"
          ],
          [
            2,
            1,
            2,
            2,
            1,
            "VAE"
          ],
          [
            3,
            1,
            1,
            3,
            0,
            "CLIP"
          ],
          [
            4,
            2,
            1,
            3,
            1,
            "DIFFCONDI"
          ],
          [
            5,
            1,
            2,
            4,
            1,
            "VAE"
          ],
          [
            6,
            4,
            0,
            5,
            0,
            "IMAGE"
          ],
          [
            7,
            3,
            0,
            6,
            1,
            "CONDITIONING"
          ],
          [
            8,
            3,
            1,
            6,
            2,
            "CONDITIONING"
          ],
          [
            9,
            3,
            2,
            6,
            3,
            "DIFFINFO"
          ],
          [
            10,
            3,
            3,
            7,
            0,
            "INT"
          ],
          [
            11,
            3,
            4,
            7,
            1,
            "INT"
          ],
          [
            12,
            7,
            0,
            6,
            4,
            "LATENT"
          ],
          [
            13,
            6,
            0,
            4,
            0,
            "LATENT"
          ],
          [
            14,
            2,
            0,
            6,
            0,
            "MODEL"
          ]
        ],
        "groups": [],
        "config": {},
        "extra": {
          "ds": {
            "scale": 0.6475374792918723,
            "offset": [
              300.3592484695541,
              -193.8134121617056
            ]
          }
        },
        "version": 0.4
      }
    }
  }
}
